<section>
  <form name="conditionPanelWatcherEdit.form" ng-model-options="{ getterSetter: true }" novalidate>
    <div class="row">
      <div class="col-md-12">
        <div class="panel-body">
          <div class="row">
            <div class="col-md-6">
              <header>
                <h4 class="form-text">
                  Match condition
                </h4>
              </header>
            </div>
          </div> <!-- END header -->
          <div class="row">
            <div class="col-md-8">
              <div class="form-group">
                <ul>
                  <li>
                    <dd-watcher-agg-type
                      agg-type-selected="conditionPanelWatcherEdit.chartQueryParams.queryType"
                      agg-type-on-select="conditionPanelWatcherEdit.condition.type.handleSelect(type)"
                    ></dd-watcher-agg-type/>
                  </li>
                  <li>
                    <dd-watcher-agg-field
                      ng-show="conditionPanelWatcherEdit.condition.field.enabled"
                      agg-field-fields="conditionPanelWatcherEdit.allDocFields"
                      agg-field-on-select="conditionPanelWatcherEdit.condition.field.handleSelect(field)"
                    ></dd-watcher-agg-field/>
                  </li>
                  <li>
                    <dd-watcher-agg-over
                      agg-over-options="conditionPanelWatcherEdit.chartQueryParams.over"
                      agg-over-fields="conditionPanelWatcherEdit.allDocFields"
                      agg-over-on-select="conditionPanelWatcherEdit.condition.over.handleSelect(over)"
                    ></dd-watcher-agg-over/>
                  </li>
                  <li>
                    <dd-watcher-agg-threshold
                      agg-threshold-options="conditionPanelWatcherEdit.chartQueryParams.threshold"
                      agg-threshold-on-select="conditionPanelWatcherEdit.condition.threshold.handleSelect(direction, n)"
                    ></dd-watcher-agg-threshold/>
                  </li>
                  <li>
                    <dd-watcher-agg-time
                      agg-time-options="conditionPanelWatcherEdit.chartQueryParams.last"
                      agg-time-on-select="conditionPanelWatcherEdit.condition.last.handleSelect(unit, n)"
                    ></dd-watcher-agg-time/>
                  </li>
                </ul>
              </div>
            </div>
            <div class="col-md-2">
              <div class="form-group">
              </div>
            </div>
            <div class="col-md-1">
              <div class="form-group">
                <a href="javascript:void(0)"
                  ng-show="!conditionPanelWatcherEdit.rawDoc.chart.show"
                  ng-click="conditionPanelWatcherEdit.rawDoc.chart.toggle()"
                >
                  <i class="fa fa-eye-slash"></i> chart query
                </a>
                <a href="javascript:void(0)"
                  ng-show="conditionPanelWatcherEdit.rawDoc.chart.show"
                  ng-click="conditionPanelWatcherEdit.rawDoc.chart.toggle()"
                >
                  <i class="fa fa-eye"></i> chart query
                </a>
              </div>
            </div>
            <div class="col-md-1">
              <div class="form-group">
                <a href="javascript:void(0)"
                  ng-show="!conditionPanelWatcherEdit.rawDoc.watcher.show"
                  ng-click="conditionPanelWatcherEdit.rawDoc.watcher.toggle()"
                >
                  <i class="fa fa-eye-slash"></i> watcher raw
                </a>
                <a href="javascript:void(0)"
                  ng-show="conditionPanelWatcherEdit.rawDoc.watcher.show"
                  ng-click="conditionPanelWatcherEdit.rawDoc.watcher.toggle()"
                >
                  <i class="fa fa-eye"></i> watcher raw
                </a>
              </div>
            </div>
          </div> <!-- END condition based query builder -->
          <div class="row">
            <div class="col-md-2">
              <div class="form-group">
                <p ng-show="conditionPanelWatcherEdit.activeChart.enabled">
                  <i class="fa fa-area-chart"></i> {{conditionPanelWatcherEdit.activeChart.name}}
                </p>
              </div>
            </div>
            <div class="col-md-1">
              <div class="form-group">
                <button 
                  type="button"
                  class="btn btn-default"
                  aria-label="Left Align"
                  ng-click="conditionPanelWatcherEdit.switchToLeftChart()"
                  ng-show="conditionPanelWatcherEdit.areMultipleCharts && conditionPanelWatcherEdit.isAnyActiveChart"
                >
                  <span class="glyphicon glyphicon-arrow-left" aria-hidden="true"></span>
                </button>
              </div>
            </div>
            <div class="col-md-1">
              <div class="form-group">
                <button
                  type="button"
                  class="btn btn-default"
                  aria-label="Left Align"
                  ng-click="conditionPanelWatcherEdit.switchToRightChart()"
                  ng-show="conditionPanelWatcherEdit.areMultipleCharts && conditionPanelWatcherEdit.isAnyActiveChart"
                >
                  <span class="glyphicon glyphicon-arrow-right" aria-hidden="true"></span>
                </button>
              </div>
            </div>
            <div class="col-md-8">
            </div>
          </div>
          <div class="row">
            <div class="col-md-6">
              <div class="form-group chart-container" ng-show="conditionPanelWatcherEdit.activeChart.enabled">
                <small class="form-text text-muted">Historical data:</small>
                <canvas
                  class="chart chart-line"
                  chart-data="conditionPanelWatcherEdit.activeChart.yAxis"
                  chart-labels="conditionPanelWatcherEdit.activeChart.xAxis"
                  chart-options="conditionPanelWatcherEdit.activeChart.options"
                  chart-click="conditionPanelWatcherEdit.onChartClick"
                ></canvas> 
              </div>
              <div class="form-group" ng-show="!conditionPanelWatcherEdit.isAnyActiveChart">
                <p>{{conditionPanelWatcherEdit.messages.nodata}}</p>
              </div>
            </div>
            <div class="col-md-3">
              <div class="form-group" ng-show="conditionPanelWatcherEdit.rawDoc.chart.show">
                <small class="form-text text-muted">Chart query (read only)</small>
                <div
                  readonly
                  ui-ace="conditionPanelWatcherEdit.rawDoc.config()"
                  ng-model="conditionPanelWatcherEdit.rawDoc.chart.text"
                >
                  {{conditionPanelWatcherEdit.rawDoc.chart.text}}
                </div>
              </div>
            </div>
            <div class="col-md-3">
              <div class="form-group" ng-show="conditionPanelWatcherEdit.rawDoc.watcher.show">
                <small class="form-text text-muted">Watcher raw (read only)</small>
                <div
                  readonly
                  ui-ace="conditionPanelWatcherEdit.rawDoc.config()"
                  ng-model="conditionPanelWatcherEdit.rawDoc.watcher.text"
                >
                  {{conditionPanelWatcherEdit.rawDoc.watcher.text}}
                </div>
              </div>
            </div>
          </div> <!-- END chart, data hostory -->
        </div>
      </div>
    </div>
  </form>
</section>
